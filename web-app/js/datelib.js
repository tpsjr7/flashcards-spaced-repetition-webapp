//http://code.google.com/p/datejs/wiki/APIDocumentation
Date.h={name:"en-US",pb:"English (United States)",Mb:"English (United States)",S:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],N:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Zb:["Su","Mo","Tu","We","Th","Fr","Sa"],sb:["S","M","T","W","T","F","S"],Y:["January","February","March","April","May","June","July","August","September","October","November","December"],O:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R:"AM",aa:"PM",rb:0,Na:2029,pa:"mdy",tb:{Wb:"M/d/yyyy", Eb:"dddd, MMMM dd, yyyy",Yb:"h:mm tt",Gb:"h:mm:ss tt",vb:"dddd, MMMM dd, yyyy h:mm:ss tt",$b:"yyyy-MM-ddTHH:mm:ss",ic:"yyyy-MM-dd HH:mm:ssZ",Sb:"ddd, dd MMM yyyy HH:mm:ss GMT",Lb:"MMMM dd",mc:"MMMM, yyyy"},ba:{Ab:/^jan(uary)?/i,qb:/^feb(ruary)?/i,Ib:/^mar(ch)?/i,kb:/^apr(il)?/i,Jb:/^may/i,Cb:/^jun(e)?/i,Bb:/^jul(y)?/i,lb:/^aug(ust)?/i,Vb:/^sep(t(ember)?)?/i,Ob:/^oct(ober)?/i,Nb:/^nov(ember)?/i,nb:/^dec(ember)?/i,bc:/^su(n(day)?)?/i,Kb:/^mo(n(day)?)?/i,hc:/^tu(e(s(day)?)?)?/i,kc:/^we(d(nesday)?)?/i, dc:/^th(u(r(s(day)?)?)?)?/i,ub:/^fr(i(day)?)?/i,Ub:/^sa(t(urday)?)?/i,wb:/^next/i,Rb:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,ac:/^(\-|before|ago)/i,nc:/^yesterday/i,ca:/^t(oday)?/i,gc:/^tomorrow/i,now:/^n(ow)?/i,q:/^ms|milli(second)?s?/i,j:/^sec(ond)?s?/i,i:/^min(ute)?s?/i,c:/^h(ou)?rs?/i,lc:/^w(ee)?k/i,f:/^m(o(nth)?s?)?/i,e:/^d(ays?)?/i,g:/^y((ea)?rs?)?/i,Xb:/^(a|p)/i,Fb:/^(a\.?m?\.?|p\.?m?\.?)/i,m:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,Pb:/^\s*(st|nd|rd|th)/i, ec:/^\s*(\:|a|p)/i},Q:{da:"-000",bb:"-0400",$a:"-0500",gb:"-0600",ib:"-0700"},P:{da:"-000",ab:"-0500",Za:"-0600",db:"-0700",hb:"-0800"}};Date.wa=function(b){var a=Date.h.Y,d=Date.h.O;b=b.toLowerCase();for(var g=0;g<a.length;g++)if(a[g].toLowerCase()==b||d[g].toLowerCase()==b)return g;return-1};Date.V=function(b){var a=Date.h.S,d=Date.h.N;b=b.toLowerCase();for(var g=0;g<a.length;g++)if(a[g].toLowerCase()==b||d[g].toLowerCase()==b)return g;return-1}; Date.W=function(b){return b%4===0&&b%100!==0||b%400===0};Date.w=function(b,a){return[31,Date.W(b)?29:28,31,30,31,30,31,31,30,31,30,31][a]};Date.getTimezoneOffset=function(b,a){return a?Date.h.P[b.toUpperCase()]:Date.h.Q[b.toUpperCase()]};Date.xb=function(b,a){var d=a?Date.h.P:Date.h.Q,g;for(g in d)if(d[g]===b)return g;return null};Date.prototype.ma=function(b,a){var d=this.getTime();return d>=b.getTime()&&d<=a.getTime()};function m(b,a){b.setMilliseconds(b.getMilliseconds()+a);return b} function q(b,a){var d=b.getDate();b.setDate(1);b.setMonth(b.getMonth()+a);b.setDate(Math.min(d,b.w()));return b}Date.prototype.add=function(b){if(typeof b=="number"){this.C=b;return this}if(b.q||b.Ba)m(this,b.q||b.Ba);if(b.j||b.Ga)m(this,(b.j||b.Ga)*1E3);if(b.i||b.Ca)m(this,(b.i||b.Ca)*6E4);if(b.c||b.za)m(this,(b.c||b.za)*36E5);if(b.f||b.Z)q(this,b.f||b.Z);if(b.g||b.Va)q(this,(b.g||b.Va)*12);if(b.e||b.s)m(this,(b.e||b.s)*864E5);return this}; Date.r=function(b,a,d,g){if(typeof b!="number")throw new TypeError(b+" is not a Number.");else if(b<a||b>d)throw new RangeError(b+" is not a valid value for "+g+".");return true};Date.Qa=function(b){return Date.r(b,0,999,"milliseconds")};Date.Ta=function(b){return Date.r(b,0,59,"seconds")};Date.Ra=function(b){return Date.r(b,0,59,"minutes")};Date.Pa=function(b){return Date.r(b,0,23,"hours")};Date.Oa=function(b,a,d){return Date.r(b,1,Date.w(a,d),"days")};Date.Sa=function(b){return Date.r(b,0,11,"months")}; Date.Ua=function(b){return Date.r(b,1,9999,"seconds")}; Date.prototype.p=function(b){if(!b.q&&b.q!==0)b.q=-1;if(!b.j&&b.j!==0)b.j=-1;if(!b.i&&b.i!==0)b.i=-1;if(!b.c&&b.c!==0)b.c=-1;if(!b.e&&b.e!==0)b.e=-1;if(!b.f&&b.f!==0)b.f=-1;if(!b.g&&b.g!==0)b.g=-1;b.q!=-1&&Date.Qa(b.q)&&m(this,b.q-this.getMilliseconds());b.j!=-1&&Date.Ta(b.j)&&m(this,(b.j-this.getSeconds())*1E3);b.i!=-1&&Date.Ra(b.i)&&m(this,(b.i-this.getMinutes())*6E4);b.c!=-1&&Date.Pa(b.c)&&m(this,(b.c-this.getHours())*36E5);b.f!==-1&&Date.Sa(b.f)&&q(this,b.f-this.getMonth());b.g!=-1&&Date.Ua(b.g)&& q(this,(b.g-this.getFullYear())*12);b.e!=-1&&Date.Oa(b.e,this.getFullYear(),this.getMonth())&&m(this,(b.e-this.getDate())*864E5);b.m&&t(this,Date.getTimezoneOffset(b.m));b.A&&t(this,b.A);return this};Date.prototype.W=function(){var b=this.getFullYear();return b%4===0&&b%100!==0||b%400===0};Date.prototype.w=function(){return Date.w(this.getFullYear(),this.getMonth())};function t(b,a){var d=b.getTimezoneOffset();m(b,(Number(a)*-6/10-d)*6E4);return b}Date.prototype.la=Date.prototype.toString; Date.prototype.toString=function(b){var a=this;function d(g){return g.toString().length==1?"0"+g:g}return b?b.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(g){switch(g){case "hh":return d(a.getHours()<13?a.getHours():a.getHours()-12);case "h":return a.getHours()<13?a.getHours():a.getHours()-12;case "HH":return d(a.getHours());case "H":return a.getHours();case "mm":return d(a.getMinutes());case "m":return a.getMinutes();case "ss":return d(a.getSeconds());case "s":return a.getSeconds(); case "yyyy":return a.getFullYear();case "yy":return a.getFullYear().toString().substring(2,4);case "dddd":return Date.h.S[a.getDay()];case "ddd":return Date.h.N[a.getDay()];case "dd":return d(a.getDate());case "d":return a.getDate().toString();case "MMMM":return Date.h.Y[a.getMonth()];case "MMM":return Date.h.O[a.getMonth()];case "MM":return d(a.getMonth()+1);case "M":return a.getMonth()+1;case "t":return a.getHours()<12?Date.h.R.substring(0,1):Date.h.aa.substring(0,1);case "tt":return a.getHours()< 12?Date.h.R:Date.h.aa;case "zzz":case "zz":case "z":return""}}):this.la()};Date.now=function(){return new Date};Date.ca=function(){var b=Date.now();b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);return b};Date.prototype.C=+1;Date.prototype.B=false;Number.prototype.ia="day"; (function(){var b=Date.prototype,a=Number.prototype,d="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),k="Millisecond Second Minute Hour Day Week Month Year".split(/\s/);function p(i){return function(){if(this.B){this.B=false;return this.getDay()==i}var j=this.C,l=(i-this.getDay()+7*(j||+1))%7;j=l===0?l+=7*(j||+1):l;return m(this,j*864E5)}}for(var f=0;f<d.length;f++)b[d[f]]= b[d[f].substring(0,3)]=p(f);function c(i){return function(){if(this.B){this.B=false;return this.getMonth()===i}var j=this.C,l=(i-this.getMonth()+12*(j||+1))%12;return q(this,l===0?l+=12*(j||+1):l)}}for(d=0;d<g.length;d++)b[g[d]]=b[g[d].substring(0,3)]=c(d);function e(i){return function(){if(i.substring(i.length-1)!="s")i+="s";return this["add"+i](this.C)}}function h(i){return function(){this.ia=i;return this}}for(d=0;d<k.length;d++){g=k[d].toLowerCase();b[g]=b[g+"s"]=e(k[d]);a[g]=a[g+"s"]=h(g)}})(); (function(){Date.J={l:function(f){this.message="Parse error at '"+f.substring(0,10)+" ...'"}};var b=Date.J,a=b.ga={b:function(f){return function(c){var e=c.match(f);if(e)return[e[0],c.substring(e[0].length)];else throw new b.l(c);}},fc:function(){return function(f){return a.b(RegExp("^s*"+f+"s*"))(f)}},L:function(f){return a.b(RegExp("^"+f))},jc:function(f){return function(c){for(var e=[],h=null;c.length;){try{h=f.call(this,c)}catch(i){e.push(h[0]);c=h[1];continue}break}return[e,c]}},X:function(f){return function(c){for(var e= [],h=null;c.length;){try{h=f.call(this,c)}catch(i){return[e,c]}e.push(h[0]);c=h[1]}return[e,c]}},G:function(f){return function(c){var e=null;try{e=f.call(this,c)}catch(h){return[null,c]}return[e[0],e[1]]}},Ea:function(f){return function(c){try{f.call(this,c)}catch(e){return[null,c]}throw new b.l(c);}},o:function(f){return f?function(c){var e=null;e=f.call(this,c);return[null,e[1]]}:null},product:function(){for(var f=arguments[0],c=Array.prototype.slice.call(arguments,1),e=[],h=0;h<f.length;h++)e.push(a.k(f[h], c));return e},d:function(f){var c={},e=null;return function(h){try{e=c[h]=c[h]||f.call(this,h)}catch(i){e=c[h]=i}if(e instanceof b.l)throw e;else return e}},D:function(){var f=arguments;return function(c){for(var e=null,h=0;h<f.length;h++)if(f[h]!=null){try{e=f[h].call(this,c)}catch(i){e=null}if(e)return e}throw new b.l(c);}},k:function(){var f=arguments;return function(c){for(var e=[],h=null,i=0;i<f.length;i++)if(f[i]!=null){try{h=f[i].call(this,c)}catch(j){throw new b.l(c);}e.push(h[0]);c=h[1]}return[e, c]}},all:function(){var f=f;return f.k(f.G(arguments))},Ha:function(f,c,e){c=c||a.b(/^\s*/);e=e||null;if(f.length==1)return f[0];return function(h){for(var i=null,j=null,l=[],n=0;n<f.length;n++){try{i=f[n].call(this,h)}catch(o){break}l.push(i[0]);try{j=c.call(this,i[1])}catch(s){j=null;break}h=j[1]}if(!i)throw new b.l(h);if(j)throw new b.l(j[1]);if(e)try{i=e.call(this,i[1])}catch(u){throw new b.l(i[1]);}return[l,i?i[1]:h]}},ma:function(f,c,e){e=e||f;var h=a.k(a.o(f),c,a.o(e));return function(i){i= h.call(this,i);return[[i[0][0],r[0][2]],i[1]]}},Db:function(f,c,e){c=c||a.b(/^\s*/);e=e||null;return f instanceof Array?a.k(a.product(f.slice(0,-1),a.o(c)),f.slice(-1),a.o(e)):a.k(a.X(a.k(f,a.o(c))),px,a.o(e))},p:function(f,c,e){c=c||a.b(/^\s*/);e=e||null;return function(h){var i=null;for(var j=i=null,l=null,n=[[],h],o=false,s=0;s<f.length;s++){i=j=null;o=f.length==1;try{i=f[s].call(this,h)}catch(u){continue}l=[[i[0]],i[1]];if(i[1].length>0&&!o)try{j=c.call(this,i[1])}catch(v){o=true}else o=true; if(!o&&j[1].length===0)o=true;if(!o){i=[];for(o=0;o<f.length;o++)s!=o&&i.push(f[o]);i=a.p(i,c).call(this,j[1]);if(i[0].length>0){l[0]=l[0].concat(i[0]);l[1]=i[1]}}if(l[1].length<n[1].length)n=l;if(n[1].length===0)break}if(n[0].length===0)return n;if(e){try{j=e.call(this,n[1])}catch(w){throw new b.l(n[1]);}n[1]=j[1]}return n}},forward:function(f,c){return function(e){return f[c].call(this,e)}},replace:function(f,c){return function(e){e=f.call(this,e);return[c,e[1]]}},a:function(f,c){return function(e){e= f.call(this,e);return[c.call(this,e[0]),e[1]]}},min:function(f,c){return function(e){var h=c.call(this,e);if(h[0].length<f)throw new b.l(e);return h}}};function d(f){return function(){var c=null,e=[];if(arguments.length>1)c=Array.prototype.slice.call(arguments);else if(arguments[0]instanceof Array)c=arguments[0];if(c)for(var h=c.shift();0<h.length;){c.unshift(h[0]);e.push(f.apply(null,c));c.shift();return e}else return f.apply(null,arguments)}}for(var g="optional not ignore cache".split(/\s/),k=0;k< g.length;k++)a[g[k]]=d(a[g[k]]);function p(f){return function(){return arguments[0]instanceof Array?f.apply(null,arguments[0]):f.apply(null,arguments)}}g="each any all".split(/\s/);for(k=0;k<g.length;k++)a[g[k]]=p(a[g[k]])})(); (function(){function b(c){for(var e=[],h=0;h<c.length;h++)if(c[h]instanceof Array)e=e.concat(b(c[h]));else c[h]&&e.push(c[h]);return e}Date.I={};Date.ha={c:function(c){return function(){this.c=Number(c)}},i:function(c){return function(){this.i=Number(c)}},j:function(c){return function(){this.j=Number(c)}},v:function(c){return function(){this.v=c.slice(0,1).toLowerCase()}},m:function(c){return function(){var e=c.replace(/[^\d\+\-]/g,"");if(e.length)this.A=Number(e);else this.m=c.toLowerCase()}},e:function(c){var e= c[0];return function(){this.e=Number(e.match(/\d+/)[0])}},f:function(c){return function(){this.f=c.length==3?Date.wa(c):Number(c)-1}},g:function(c){return function(){var e=Number(c);this.g=c.length>2?e:e+(e+2E3<Date.h.Na?2E3:1900)}},K:function(c){return function(){switch(c){case "yesterday":this.s=-1;break;case "tomorrow":this.s=1;break;case "today":this.s=0;break;case "now":this.s=0;this.now=true;break}}},ua:function(c){c=c instanceof Array?c:[c];var e=new Date;this.g=e.getFullYear();this.f=e.getMonth(); this.e=1;for(e=this.j=this.i=this.c=0;e<c.length;e++)c[e]&&c[e].call(this);this.c=this.v=="p"&&this.c<13?this.c+12:this.c;if(this.e>Date.w(this.g,this.f))throw new RangeError(this.e+" is not a valid value for days.");c=new Date(this.g,this.f,this.e,this.c,this.i,this.j);if(this.m)c.p({m:this.m});else this.A&&c.p({A:this.A});return c},ta:function(c){c=c instanceof Array?b(c):[c];if(c.length===0)return null;for(var e=0;e<c.length;e++)typeof c[e]=="function"&&c[e].call(this);if(this.now)return new Date; c=Date.ca();if(this.s!=null||this.$||this.z){var h,i;i=this.$=="past"||this.z=="subtract"?-1:1;if(this.H){this.n="day";e=Date.V(this.H)-c.getDay();h=7;this.s=e?(e+i*h)%h:i*h}if(this.f){this.n="month";e=this.f-c.getMonth();h=12;this.Z=e?(e+i*h)%h:i*h;this.f=null}if(!this.n)this.n="day";if(this[this.n+"s"]==null||this.z!=null){if(!this.value)this.value=1;if(this.n=="week"){this.n="day";this.value*=7}this[this.n+"s"]=this.value*i}return c.add(this)}else{if(this.v&&this.c)this.c=this.c<13&&this.v=="p"? this.c+12:this.c;if(this.H&&!this.e)this.e=m(c,(Date.V(this.H)-c.getDay())*864E5).getDate();if(this.f&&!this.e)this.e=1;return c.p(this)}}};var a=Date.J.ga,d=Date.I,g=Date.ha,k;d.qa=a.b(/^([\s\-\.\,\/\x27]+)/);d.Ka=a.L(":");d.whiteSpace=a.b(/^\s*/);d.va=a.b(/^(([\s\,]|at|on)+)/);var p={};d.t=function(c){var e=p[c];if(!e){e=Date.h.ba;for(var h=c.split(/\s+/),i=[],j=0;j<h.length;j++)i.push(a.replace(a.b(e[h[j]]),h[j]));e=p[c]=a.D.apply(null,i)}return e};d.u=function(c){return a.b(Date.h.ba[c])};d.yb= a.d(a.a(a.b(/^(0[0-9]|1[0-2]|[1-9])/),g.c));d.zb=a.d(a.a(a.b(/^(0[0-9]|1[0-2])/),g.c));d.ea=a.d(a.a(a.b(/^([0-1][0-9]|2[0-3]|[0-9])/),g.c));d.cb=a.d(a.a(a.b(/^([0-1][0-9]|2[0-3])/),g.c));d.Hb=a.d(a.a(a.b(/^([0-5][0-9]|[0-9])/),g.i));d.Da=a.d(a.a(a.b(/^[0-5][0-9]/),g.i));d.Tb=a.d(a.a(a.b(/^([0-5][0-9]|[0-9])/),g.j));d.Ia=a.d(a.a(a.b(/^[0-5][0-9]/),g.j));d.ya=a.d(a.Ha([d.ea,d.Da,d.Ia],d.Ka));d.cc=a.d(a.a(d.u("shortMeridian"),g.v));d.Ma=a.d(a.a(d.u("longMeridian"),g.v));d.qc=a.d(a.a(a.b(/^(\+|\-)?\s*\d\d\d\d?/), g.m));d.rc=a.d(a.a(a.b(/^(\+|\-)\s*\d\d\d\d/),g.m));d.Ya=a.d(a.a(d.u("timezone"),g.m));d.La=a.k(a.o(d.whiteSpace),a.p([d.Ma,d.Ya]));d.Ja=a.k(a.G(a.o(a.L("T"))),d.ya,d.La);d.na=a.d(a.a(a.k(a.b(/^([0-2]\d|3[0-1]|\d)/),a.G(d.u("ordinalSuffix"))),g.e));d.ra=a.d(a.a(a.k(a.b(/^([0-2]\d|3[0-1])/),a.G(d.u("ordinalSuffix"))),g.e));d.F=d.mb=a.d(a.a(d.t("sun mon tue wed thu fri sat"),function(c){return function(){this.H=c}}));d.fa=a.d(a.a(a.b(/^(1[0-2]|0\d|\d)/),g.f));d.eb=a.d(a.a(a.b(/^(1[0-2]|0\d)/),g.f)); d.M=d.fb=a.d(a.a(d.t("jan feb mar apr may jun jul aug sep oct nov dec"),g.f));d.y=a.d(a.a(a.b(/^(\d\d?)/),g.g));d.Wa=a.d(a.a(a.b(/^(\d\d)/),g.g));d.pc=a.d(a.a(a.b(/^(\d\d?\d?\d?)/),g.g));d.Xa=a.d(a.a(a.b(/^(\d\d\d\d)/),g.g));k=function(){return a.k(a.D.apply(null,arguments),a.Ea(d.u("timeContext")))};d.e=k(d.na,d.ra);d.f=k(d.fa,d.M);d.g=k(d.Xa,d.Wa);d.Fa=a.a(d.t("past future"),function(c){return function(){this.$=c}});d.z=a.a(d.t("add subtract"),function(c){return function(){this.z=c}});d.K=a.a(d.t("yesterday tomorrow today now"), g.K);d.n=a.a(d.t("minute hour day week month year"),function(c){return function(){this.n=c}});d.value=a.a(a.b(/^\d\d?(st|nd|rd|th)?/),function(c){return function(){this.value=c.replace(/\D/g,"")}});d.sa=a.p([d.K,d.z,d.value,d.n,d.Fa,d.F,d.M]);k=function(){return a.p(arguments,d.qa)};d.Aa=k(d.F,d.f,d.e,d.g);d.oc=k(d.F,d.g,d.f,d.e);d.ob=k(d.F,d.e,d.f,d.g);d.oa=function(c){return(d[Date.h.pa]||d.Aa).call(this,c)};d.T=a.a(a.X(a.D(a.a(a.b(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(c){if(d[c])return d[c]; else throw Date.J.l(c);}),a.a(a.b(/^[^dMyhHmstz]+/),function(c){return a.o(a.L(c))}))),function(c){return a.a(a.k.apply(null,c),g.ua)});var f={};d.U=function(c){if(c instanceof Array){for(var e=[],h=0;h<c.length;h++)e.push(f[c[h]]=f[c[h]]||d.T(c[h])[0]);return a.D.apply(null,e)}else return f[c]=f[c]||d.T(c)[0]};d.ja=d.U(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);d.ka=a.a(a.p([d.oa,d.Ja,d.sa],d.va,d.whiteSpace),g.ta);d.start=function(c){try{var e=d.ja.call({}, c);if(e[1].length===0)return e}catch(h){}return d.ka.call({},c)}})();Date.jb=Date.parse;Date.parse=function(b){var a=null;if(!b)return null;try{a=Date.I.start.call({},b)}catch(d){return null}return a[1].length===0?a[0]:null};Date.xa=function(b){var a=Date.I.U(b);return function(d){var g=null;try{g=a.call({},d)}catch(k){return null}return g[1].length===0?g[0]:null}};Date.Qb=function(b,a){return Date.xa(a)(b)};
