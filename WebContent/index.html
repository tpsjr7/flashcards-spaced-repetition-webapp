<html>
<head>

<script type="text/javascript" src="js/dojo-release-1.5.0/dojo/dojo.js" djConfig="parseOnLoad: true" ></script>
<script type="text/javascript" src="js/dojo-release-1.5.0/dijit/dijit.js"></script>
<style type="text/css">
@import "js/dojo-release-1.5.0/dijit/themes/tundra/tundra.css";
@import "js/dojo-release-1.5.0/dojo/resources/dojo.css"
</style>

<script type="text/javascript">
dojo.require("dijit.form.FilteringSelect");
dojo.require("dojo.parser");  // scan page for widgets and instantiate them
dojo.require("dojox.data.QueryReadStore");
dojo.addOnLoad(function(){
	console.log("hello");
});
</script>     

<script>
function createDeck(){
	dojo.xhrPost({
		url:"CreateDeck",
		content:{"deck-name":dojo.byId('deck-name').value},	
		error: function(err){
			dojo.byId("status-div").innerHTML=dojo.toJson(err)
		},
		load: function(data){
			dojo.byId("status-div").innerHTML=dojo.fromJson(data).status		
		}
		
	});
	dojo.byId("status-div").innerHTML="Creating deck ..."
}

function openDeck(){
	document.location="backendstudy.jsp?deck_id="+thestore.getValue(deckSelect.item,'id')
	//alert("value of select is: "+deckSelect.get('value'))
	//alert("howdy2")	
	//
}

</script>
   
</head>
<body class="tundra">
<span dojoType="dojox.data.QueryReadStore" jsId="thestore"
	url="AutoCompleteServlet" requestMethod="post"></span>
	
<span>Decks:</span>

<select dojoType="dijit.form.FilteringSelect" jsId="deckSelect"
	name="state1" autoComplete="true" invalidMessage="Invalid deck name"
	store=thestore pageSize=20 ></select>
	
<input type="button" value="Open" onclick="openDeck()"/>


<div>
Create deck:
<input type="text" width="60px" id="deck-name" />
<input type="button" value="Create" onclick="createDeck()"/>	
</div>



<div id="status-div"></div>

</body>
</html>